{% extends "template.html" %}

{% block title %}Settings{% endblock %}

{% block scriptsAndStyles %}
<!--javaScript to confirm a users deactivation -->
<script>
$(document).ready(function() {
	$("#deactivate").submit(function(e) {
		if (!confirm('Are you sure you want to deactivate this account?')) {
			e.preventDefault();
		}
	});
});
</script>
{% endblock %}

{% block content %}
<fieldset class ="form-container">
	<i class="fa fa-cog headingIcon pull-left"></i><h4> Settings </h4>
	<hr>
	<div role="tabpanel">
		<!--Tab Headers -->
		<ul class="nav nav-pills nav-justified" role="tablist">
			<li role="presentation" class="active"><a href="#deactivate" aria-controls="deactivate" role="tab" data-toggle="tab">Account Settings</a></li>
			<li role="presentation"><a href="#security" aria-controls="security" role="tab" data-toggle="tab">Security & Privacy</a></li>
			<li role="presentation"><a href="#privacy" aria-controls="privacy" role="tab" data-toggle="tab">FAQ's</a></li>
		</ul>
		<hr>
		<br />

		<div role="tabpanel" class="tab-pane fade in active container" id="deactivate">
			<h4>Deactivate account </h4>
			{% if message != null %}
			<div class="alert alert-{{type}} alert-dismissible" role="alert">
				<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				{{message}}
			</div>
			{% endif %}
			
			<fieldset class="deactivate">
			<!--Form for users to fill in details why they are deactivating -->
			<form name="deactivate" action="/deactivate" id="deactivate" method="POST">

				<input type="hidden" name="username" value="{{user}}">
				<!--Drop down list populated from the database of reasons why you may deactivate -->
				<div class="form-group">
					<select name="reason" class="form-control">
						<option class="placeholder" disabled selected>Please select a reason</option>
						{% for reason in reasons %}
						<option>{{reason.reason}}</option>
						{% endfor %}
					</select>
				</div>

				<div class="form-group">
					<textarea name="comments" id="comments" class="form-control" placeholder="Any comments..."></textarea>
				</div>

				<div class="form-group">
					<input type="checkbox" name="deletecheckbox"> Please check the box if you want us to delete your data
					<br />
					<a class="smallLink" data-toggle="modal" data-target="#keepData"><i class="fa fa-file"></i> Why should we keep your data?</a>
				</div>

				<div class="form-group">
					<input class="btn btn-danger pull-right" id="deactivateConfirm" type="submit" value="Deactivate">
				</div>
			</form>
			</fieldset>

			<!-- Information Modal -->
			<div class="modal fade" id="keepData" tabindex="-1" role="dialog" aria-labelledby="keepDataLabel" aria-hidden="true">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
							<h4 class="modal-title" id="keepDataLabel">What happens to your information</h4>
						</div>
						<div class="modal-body">
							<p>
								We store your information in a completely secure database, if your personal information changes, you may correct or update it by making a change in <a href="/settings">Settings</a> > <a href="/editprofile">Edit Profile</a>.
							</p>
							<p>
								If you wish to deactivate your JustHealth account, we will retain your information for as long as your account is active or is needed to provide you required functionality. We will retain and use your information as necessary to comply with our legal obligations, resolve disputes, and enforce our agreements.<br/>
							</p>
							<p class="bold">
								If you wish, we can retain your information, there are benefits to doing so.
							</p>
							<ul>
								<li>If you are only temporarily leaving, we will be able to restore your account to the point you left it when you return.</li>
								<li>If you donâ€™t want us to keep your data, you will have to completely re-register instead of reactivating your account.</li>
							</ul>
							<p>
								If you select to leave your information with us, you can contact <a href="mailto:justhealth@justhealth.co.uk">justhealth@justhealth.co.uk</a> if you change your mind.
							</p>
							<p>
								We promise to notify you of any changes to our privacy policy or to the way your information is stored.
							</p>
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						</div>
					</div>
				</div>
			</div>

		</div>

		<div role="tabpanel" class="tab-pane fade in active container" id="security">
			<h4>Security </h4>

		</div>

		<div role="tabpanel" class="tab-pane fade in active container" id="privacy">
			<h4>Privacy & FAQ's </h4>
			<ol>
				<li> Who can connect with me? </li>
				As a Patient only carers can search for you, as a carer only patients can search for you
				<li> Who view my data? </li>
				As a patient only you and your carer can view your data
				As a carer patients can only see your username, firstname and surname
				<li> Where is my data stored? </li>
				All data is stored on JustHealth's database which protected by many security settings
				<li> How can I delete appointments about myself? </li>
				To delete appointments and prescriptions this can be done within the respective pages.
				<li> How can I delete all my data? </li>
				To delete all data about you, you need to deactivate your account and check the box to remove all your data.
				<li> How can I leave JustHealth? </li>
				To remove your account, this is done via the deactivation tab.
			</ol>


		</div>
</div>

</fieldset>
{% endblock %}
