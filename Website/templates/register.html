{% extends "template.html" %}

{% block title %}Registration{% endblock %}

{% block scriptsAndStyles %}
<script>
$(document).ready(function() {
	//check password strength
	//keyup event on password field so code will execute on every keypress
	$('#password').keyup(function() {
		$('#result').html(checkStrength($('#password').val()));
	});

	//check if email is valid
	//focus out: validation is performed when different field is active
	$('#validateEmail').focusout(function() {
		if(validateEmail($('#validateEmail').val())) {
			//show message if email is valid
			$('#emailValidate').html('<i class="fa fa-check"></i> Email is valid').addClass('rightInputs');
		}
		else {
			//show message if email is not valid
			$('#emailValidate').html('<i class="fa fa-times"></i> Email is not valid').addClass('wrongInputs');
		}
	});

	$('form').submit(function(e) {
		$("form :input").each(function(){
			if ($(this).val() == null || $(this).val() == "") {
				alert("All fields must be filled out");
				e.preventDefault();
				return false;
			}
		});
	});

	//check if date format is valid
	$('#validateDOB').focusout(function() {
		if(validateDOB($('#validateDOB').val())) {
			//alert user that date format is invalid
			alert("Date not valid");
		}
	});
});
</script>
{% endblock %}

{% block content %}

<h1>Registration</h1>
  <form name="register" action="/register" id="register" method="POST">
		{% if errorMessage %}
			<div class="alert alert-danger alert-dismissible" role="alert">
  			<button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  			<strong><i class="fa fa-exclamation-triangle"></i></strong> {{errorMessage}}
			</div>
		{% endif %}
		<!-- onsubmit="return validateForm() && validateEmail() && validateDob() && terms());" -->
    <div class="form-group">
        <label for="username">Username</label>
        <input class="form-control" type="text" name="username">
    </div>

    <div class="form-group">
        <label for="firstname">First Name</label>
        <input class="form-control" type="text" name="firstname">
    </div>

    <div class="form-group">
        <label for="surname">Surname</label>
        <input class="form-control" type="text" name="surname">
    </div>

    <div class="form-group">
        <label for="dob">Date of Birth</label>
        <input class="form-control" type="date" name="dob" id="validateDOB">
		<span id="DOBValidation"></span>
    </div>

    <div class="form-group">
        <label for="isMale">Gender </label>
        <input class="" type="radio" name="ismale" value="true">Male&nbsp;
        <input class="" type="radio" name="ismale" value="false">Female&nbsp;
	</div>

    <div class="form-group">
        <label for="isCarer">Account Type</label>
        <input class="" type="radio" name="iscarer" value="true">Carer&nbsp;
        <input class="" type="radio" name="iscarer" value="false">Patient&nbsp;
    </div>

    <div class="form-group">
        <label for="email">Email Address</label>
        <input class="form-control" type="text" id="validateEmail" name="email">
		<span id="emailValidate"></span>
	</div>

    <div class="form-group">
        <label for="password">Password</label>
        <input class="form-control" type="password" id="password" name="password">
		<span id="result"></span>
    </div>

    <div class="form-group">
        <label for="confirmpassword">Confirm Password</label>
        <input class="form-control" type="password" id="confirmPassword" name="confirmpassword" onkeyup="passwordCheck(); return false;">
		<span id="confirmationMessage"></span>
    </div>

    <input type="checkbox" name="terms"> I accept the <a href="/termsandconditions">terms and conditions</a>

	<input class="form-control" type="submit" value="Register">
		<br/>
  </form>
{% endblock %}
